<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-10 col-lg-8">
      <div class="card">
        <div class="card-header">
          <h4 class="mb-0">
            {{ isEdit ? "Editar Cliente" : "Nuevo Cliente" }}
          </h4>
          @if (viaje) {
          <small class="text-muted">
            Viaje #{{ viaje.id }} - {{ viaje.date | date : "dd/MM/yyyy" }}
          </small>
          }
        </div>
        <div class="card-body">
          @if (error) {
          <div class="alert alert-danger" role="alert">
            {{ error }}
          </div>
          }

          <form (ngSubmit)="onSubmit()" #clienteForm="ngForm">
            <div class="row">
              <!-- Columna izquierda -->
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="number" class="form-label"
                    >Número de Cliente *</label
                  >
                  <input
                    type="number"
                    class="form-control"
                    id="number"
                    name="number"
                    [(ngModel)]="cliente.number"
                    min="1"
                    required
                    [disabled]="loading"
                  />
                </div>

                <div class="mb-3">
                  <label for="name" class="form-label">Nombre *</label>
                  <input
                    type="text"
                    class="form-control"
                    id="name"
                    name="name"
                    [(ngModel)]="cliente.name"
                    required
                    [disabled]="loading"
                  />
                </div>

                <div class="mb-3">
                  <label for="identity_card" class="form-label"
                    >Cédula de Identidad</label
                  >
                  <input
                    type="number"
                    class="form-control"
                    id="identity_card"
                    name="identity_card"
                    [(ngModel)]="cliente.identity_card"
                    [disabled]="loading"
                  />
                </div>

                <div class="mb-3">
                  <label for="destination" class="form-label">Destino *</label>
                  <input
                    type="text"
                    class="form-control"
                    id="destination"
                    name="destination"
                    [(ngModel)]="cliente.destination"
                    required
                    [disabled]="loading"
                  />
                </div>
              </div>

              <!-- Columna derecha -->
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="packages" class="form-label"
                    >Número de Paquetes *</label
                  >
                  <input
                    type="number"
                    class="form-control"
                    id="packages"
                    name="packages"
                    [(ngModel)]="cliente.packages"
                    min="1"
                    required
                    [disabled]="loading"
                  />
                </div>

                <div class="mb-3">
                  <label for="family_name" class="form-label">Familiar</label>
                  <input
                    type="text"
                    class="form-control"
                    id="family_name"
                    name="family_name"
                    [(ngModel)]="cliente.family_name"
                    [disabled]="loading"
                  />
                </div>

                <div class="mb-3">
                  <label for="phone" class="form-label">Teléfono</label>
                  <input
                    type="number"
                    class="form-control"
                    id="phone"
                    name="phone"
                    [(ngModel)]="cliente.phone"
                    placeholder="Ej: 5385214796"
                    [disabled]="loading"
                  />
                </div>

                <div class="mb-3">
                  <label for="delivered" class="form-label"
                    >Estado de Entrega</label
                  >
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="delivered"
                      name="delivered"
                      [(ngModel)]="cliente.delivered"
                      [disabled]="loading"
                    />
                    <label class="form-check-label" for="delivered">
                      Entregado
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <!-- Descripción (ancho completo) -->
            <div class="mb-3">
              <label for="description" class="form-label">Descripción</label>
              <textarea
                class="form-control"
                id="description"
                name="description"
                [(ngModel)]="cliente.description"
                rows="3"
                placeholder="Descripción adicional del cliente o paquetes"
                [disabled]="loading"
              >
              </textarea>
            </div>

            <div class="d-flex gap-2">
              <button
                type="submit"
                class="btn btn-primary"
                [disabled]="!clienteForm.form.valid || loading"
              >
                @if (loading) {
                <span
                  class="spinner-border spinner-border-sm me-2"
                  role="status"
                ></span>
                }
                {{ isEdit ? "Actualizar" : "Crear" }} Cliente
              </button>
              <button
                type="button"
                class="btn btn-secondary"
                (click)="cancel()"
                [disabled]="loading"
              >
                Cancelar
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
